@using Apolo.Core.Model.Treatment
@using Apolo.Core.Model
@using Apolo.Core.Util
@using Apolo.Web.Util
@{
    WorkUnit workUnit = ViewBag.WorkUnit as WorkUnit;
}

<div class="modal-header">
    <h4 class="modal-title" id="defaultModalLabel">Unidad de Trabajo #@workUnit.ID</h4>
</div>
<div class="modal-body">
    <div class="row">
        <div class="col-md-6">
            <h4>Historial de Cambios</h4>
            @if(workUnit.WorkUnitEditions.Count == 0)
            { 
                <p>No se han realizado cambios a esta unidad de trabajo.</p>
            }
            else
            {
                <ul class="list-group" style="max-height: 400px;">
                    @foreach (var workUnitEdition in workUnit.WorkUnitEditions)
                    {
                        <li class="list-group-item"><strong>@String.Format("{0:dd/MM/yyyy, hh:mm:ss}", workUnitEdition.DateTime):</strong> @workUnitEdition.Rationale</li>
                    }
                </ul>
            }
        </div>
        <div class="col-md-6">
            <h4>Detalles</h4>
            <input type="hidden" class="workUnitIdCl" value="@workUnit.ID" />
            <label>Juego</label>
            <div class="form-group">
                <select class="form-control selectpicker gameCl">
                    <option data-thumbnail="@Url.Action("GameAvatar", "Util", new { gameName = Constants.Games.PONG, small = "small", area = "" })" value="@Constants.Games.PONG" @HttpUtil.OutputIfCondition("selected=\"selected\"", workUnit.Game == Constants.Games.PONG)>@Constants.Games.PONG</option>
                    <option data-thumbnail="@Url.Action("GameAvatar", "Util", new { gameName = Constants.Games.TETRIS, small = "small", area = "" })" value="@Constants.Games.TETRIS" @HttpUtil.OutputIfCondition("selected=\"selected\"", workUnit.Game == Constants.Games.TETRIS)>@Constants.Games.TETRIS</option>
                    <option data-thumbnail="@Url.Action("GameAvatar", "Util", new { gameName = Constants.Games.INVADERS, small = "small", area = "" })" value="@Constants.Games.INVADERS" @HttpUtil.OutputIfCondition("selected=\"selected\"", workUnit.Game == Constants.Games.INVADERS)>@Constants.Games.INVADERS</option>
                </select>
            </div>
            <label>Duración (minutos)</label>
            <div class="form-group">
                <div class="form-line">
                    <input type="number" class="form-control durationCl" value="@workUnit.DurationInMinutes">
                </div>
            </div>
            <label>Dificultad</label>
            <div class="form-group">
                <select class="form-control selectpicker difficultyCl">
                    <option value="@Constants.Games.Difficulty.EASY" @HttpUtil.OutputIfCondition("selected=\"selected\"", workUnit.Difficulty == Constants.Games.Difficulty.EASY)>@Constants.Games.Difficulty.EASY</option>
                    <option value="@Constants.Games.Difficulty.MEDIUM" @HttpUtil.OutputIfCondition("selected=\"selected\"", workUnit.Difficulty == Constants.Games.Difficulty.MEDIUM)>@Constants.Games.Difficulty.MEDIUM</option>
                    <option value="@Constants.Games.Difficulty.HARD" @HttpUtil.OutputIfCondition("selected=\"selected\"", workUnit.Difficulty == Constants.Games.Difficulty.HARD)>@Constants.Games.Difficulty.HARD</option>
                </select>
            </div>
            <label>Razón del Cambio</label>
            <div class="form-group">
                <div class="form-line">
                    <textarea class="form-control rationaleCl" rows="3" required></textarea>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button type="submit" class="btn btn-success waves-effect saveCl">Guardar Cambios</button>
    <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">Cancelar</button>
</div>
